<div xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../src-generated/schemas/fhir-single.xsd">
	<a name="Normalization"/>
	<h3>Variant normalization</h3>
<p>Optionality in the Variant profile allows for different implementations to represent variants in different ways. For instance, the following variant representations are synonymous:</p>
<ul>
  <li>component:variation-code: ClinVar ID = 237860</li>
  <li>component:dna-chg: HGVS = NM_001195798.2:c.12G>A</li>
  <li>component:genomic-dna-chg: HGVS = NC_000019.9:g.11200236G>A</li>
  <li>component:genomic-dna-chg: HGVS = NC_000019.10:g.11089560G>A</li>
  <li>Multiple components:
    <ul>
	  <li>component:genomic-ref-seq: NC_000019.10</li>
	  <li>component:ref-allele: G</li>
	  <li>component:alt-allele: A</li>
	  <li>component:coordinate-system: 0-based interval counting</li>
	  <li>component:exact-start-end: start = 11089559</li>	  
	</ul>
  </li>
</ul><br/>
<p>While the specific implementation of an Operation is outside the scope of HL7, we do provide guidance on how the above representations might be normalized such than any would be found and returned in request for variants overlapping, say, the region of the LDLR gene (region=11,089,362-11,133,830; genomicRefSeq=NC_000019.10). There are likely other effective normalization strategies beyond what is described here.</p>
<p>One approach to normalization is to convert all representations to a canonical form, such as the NCBI's Sequence Position Deletion Insertion (SPDI) format. Variant queries then only need to query a single format.</p>
<p>'SPDI' is the NCBI's variation notation for variants with known breakpoints. The notation represents an observed variant sequence using deleted and inserted sequences at a given position in a reference sequence. SPDI notation uses four fields and is written out as four elements delimited by colons S:P:D:I, where S=SequenceId; P=Position, a 0-based coordinate for where the Deleted Sequence starts; D=DeletedSequence, and I=InsertedSequence. Variation Services only support variants where the coordinates of both the upstream and downstream breakpoints are known (e.g. single nucleotide change, deletions at precise coordinates). Such variants can be encoded precisely using the SPDI notation.</p>
<p><a href="https://api.ncbi.nlm.nih.gov/variation/v0/">NCBI Variation Services</a> provide a rich set of APIs that can be used to normalize variants from many formats (e.g. HGVS, VCF) into SPDI, and to normalize variants in SPDI into a canonical SPDI format. The variant above, in canonical SPDI format, resolves to this: NC_000019.10:11089559:G:A, where it can easily be determined that it overlaps the requested region (NC_000019.10:11,089,362-11,133,830).</p>
	<a name="Error codes"/>
	<h3>Error Codes</h3>
	<p>NOTE: Imprecise implementations are allowed, where results contain some records outside the requested range. This is necessary to support many bioinformatics indexing schemes.</p>
	<p>Valid response codes are shown in the following figure and described further in the table. Additional response codes (e.g. 5xx server error) may also be encountered.</p>
	<img src="find-variants-fig2.png" alt="error codes"/>
	<table>
		<thead>
			<tr>
				<th>Response Code</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>200</td>
				<td>Successfully executed request (region was studied, variants may or may not have been found)</td>
			</tr>
			<tr>
				<td>400</td>
				<td>ERROR: Invalid query parameters</td>
			</tr>
			<tr>
				<td>404</td>
				<td>ERROR: Data not found (e.g. no data found for patient, no data present for requested region for patient)</td>
			</tr>
		</tbody>
	</table>
</div>
