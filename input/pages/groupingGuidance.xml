<!-- groupingGuidance.xml {% comment %}
*****************************************************************************************
*                            WARNING: DO NOT EDIT THIS FILE                             *
*                                                                                       *
* This file is generated by SUSHI. Any edits you make to this file will be overwritten. *
*                                                                                       *
* To change the contents of this file, edit the original source file at:                *
* genomics-reporting/input/pages/groupingGuidance.xml                                            *
*****************************************************************************************
{% endcomment %} -->
<div xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../src-generated/schemas/fhir-single.xsd">
	<p>
		Genomic observations can be organized and grouped together in a wide variety of ways. This page is a brief guidance on how observations might be grouped. Generally, grouping is used to provide a visualization which may be helpful to a developer. An exception is grouping a panel, where the appropriate panel code is used (e.g. a specific Panel LOINC code in an observation used to tie all the variants of the panel together) <!--to semantically tie the panel together-->. Implementers should pay close attention to the considerations in <a ref="{{site.data.fhir.path}}diagnosticreport.html#10.3.5.3.html">Associated Observations</a> and <a ref="{{site.data.fhir.path}}observation.html#obsgrouping.html">Observation Grouping</a> describing proper usage of the relationships “diagnosticReport.result”, “Observation.hasMember”, and “Observation.derivedFrom”. With any form of grouping or Panels, a system consuming a Genomic Diagnostic Report MUST navigate through all <code>hasMember</code> relations and navigate through <code>derivedFrom</code> relationships, to ensure that all clinically relevant information is seen.
	</p> 

	<a name="grouper"> </a>
	<h3>Overview with examples</h3>
	<p>
		Observations are the core representation of structured genomic information. Result observations profiles are typically referenced directly in a Diagnostic Report (e.g. the <a href="StructureDefinition-genomics-report.html">genomics report</a>). The genetic findings, implications and region studied profiles all contain links to computably define which profiles go together (e.g. the variant observation is referenced within the implication profile using <code>derivedFrom</code>). That is, the relationships define a semantic grouping, a composite relationship between implication, haplotype, or genotype observations and the appropriate variant observation(s).<br></br><br></br>
		However, sometimes it is desired to group observations with a grouping observation. In this version of the specification, no guidance is provided on where or if a grouping observation should be used (the HL7 Orders and Observation work group owns the Observation resource and may issue guidance in the future). This is left up to the discretion of the reporting lab. Currently, observations might be organized for visualization purposes on the basis of subject, specimen, chromosome, gene, condition/disease, medication, etc. The recursive <code>hasMember</code> relationship on observation supports a nested tree-structure of observations if appropriate, though more than two levels of grouping observations is likely excessive. This <a href="Bundle-oncologyexamples-r4.html"> example</a> uses grouping to separately reference variants and other Observations as results of the report. For a version of the same report without grouping see this example<a href="Bundle-oncologyexamples-r4-noGrouping.html"> without grouping</a>. In the grouping examples, the NCI metathesaurus code C43359 (for 'Group' or 'Panel') is used for the grouping <code>Observation.code</code> field. Genomic panels that have specific codes, such as a specific LOINC code, could also be used if the grouping observation contains all the elements typically reported by the specific panel.
	</p>
	<div class="container">

		<p>Click on the images to enlarge them.</p>
		<div class="row">
			<div class="col-sm-4">
				<div class="caption">
					<p>
						Example showing diagnostic report directly referencing the resultant genomic observations without grouping (similar to <a href="Bundle-oncologyexamples-r4-noGrouping.html"> this oncology example without grouping</a> and <a href="DiagnosticReport-PGxGenomicsReportEMERGE.html">this pharmacogenomics example based on EMERGE but without grouping</a>):
					</p>
				</div>
				<div class="thumbnail">
					<a href="./diagnostic-report-no-grouping.png" target="_blank">
						<img src="diagnostic-report-no-grouping.png" alt="Example not using a grouping observation" style="width:100%"/>
					</a>
				</div>
				<p></p>
			</div>			
			<div class="col-sm-4">
				<div class="caption">
					<p>
						Example of grouping on the basis of type of genomic observation, similar to <a href="Bundle-oncologyexamples-r4.html">the oncology example above</a> and <a href="DiagnosticReport-PGxGenomicsReportEMERGE2.html">the pharmacogenomics example based on EMERGE</a> :
					</p>
				</div>
				<div class="thumbnail">
					<a href="./diagnostic-report-groupingObservations.png" target="_blank">
						<img src="diagnostic-report-groupingObservations.png" alt="Example of use of a grouping observation" style="width:100%"/>
					</a>
				</div>
				<p></p>
			</div>			
			<div class="col-sm-4">
				<div class="caption">
					<p>
						Example layout of how a mixed use of group could appear. This is an exaggeration but is meant to give an impression of the mixture grouping observations could allow. Note, there are some genomics observation profiles directly referenced as results and some that are not.
					</p>
				</div>
				<div class="thumbnail">
					<a href="./diagnostic-report-MixedUseOfGrouper.png" target="_blank">
						<img src="diagnostic-report-MixedUseOfGrouper.png" alt="Mixture of grouping" style="width:100%"/>
					</a>
				</div>
			</div>
		</div>
	</div>
	<!--p>
	Here is a figure showing diagnostic report directly referencing the resultant genomic observations without grouping (similar to <a href="Bundle-oncologyexamples-r4-noGrouping.html"> this oncology example without grouping</a> and <a href="DiagnosticReport-PGxGenomicsReportEMERGE.html">this pharmacogenomics example based on EMERGE but without grouping</a>): 
  </p>
  <img src="diagnostic-report-no-grouping.png" alt="Example not using a grouping observation"/>
  <p>
    Here is an example of grouping on the basis of type of genomic observation, similar to <a href="Bundle-oncologyexamples-r4.html">the oncology example above</a> and <a href="DiagnosticReport-PGxGenomicsReportEMERGE2.html">the pharmacogenomics example based on EMERGE</a> :
  </p>
  <img src="diagnostic-report-groupingObservations.png" alt="Example of use of a grouping observation"/>
  <p>
	Here is an example layout of how a mixed use of group could appear. This is an exaggeration but is meant to give an impression of the mixture grouping observations could allow. Note, there are some genomics observation profiles directly referenced as results and some that are not. 
  </p>
  <img src="diagnostic-report-MixedUseOfGrouper.png" alt="Mixture of "/-->
	<p></p>
	<p>
		<!--There is an important note later about expectations of the visibility of the grouped observations.--> Due to the possibility that a lab may only reference grouping observations as results, consumers of Genomic Diagnostic Reports MUST follow <code>hasMember</code> relationships iteratively and <code>derivedFrom</code> recursively to ensure that all clinically relevant information is seen. This will ensure complete processing of the <code>DiagnosticReport</code> results.
	</p>
	<p>
		For questions on FHIR querying look here: <a href="usecases.html">query guidance</a>.
	</p>
	<p>
		Final caveat, any organization of observations into groups or sub-groups is purely for navigation and presentation purposes. It carries no additional "meaning." Each observation can be interpreted on its own without knowing the associated group or sub-group and must be able to stand alone as a resource and be independently valuable. The organization of observations in groups does not assert any relationship between observations.
	</p>
  

	<!--a name="note"> </a>
  <h3>Referencing Observations from GenomicsReport</h3>
  <p>
    It is up to receiving systems to arrange/use the genomic observations appropriately. But some systems may only process just the first layer of a <code>DiagnosticReport.results</code>. Thus, when sending the report and results, we recommend including result links to all the genomic observation results being returned. For more complex reporting use cases, consider using the <code>summaryOf</code> extension on <code>DiagnosticReport</code> for creating meaningful subsets of observations.
  </p>
  <p>
    For receivers of the data, we recommend to follow all references when processing <code>DiagnosticReport.results</code> to ensure that all genomic observations have been processed. For example, if a lab were to not follow good practice and send only grouping observations as results for report, then one would need to follow the references in those grouping observations to see the genomic observations. 
  </p-->

</div>



